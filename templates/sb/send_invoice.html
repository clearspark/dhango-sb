{% extends "sb/base.html" %}

{% block sbHead %}
	{{block.super}}
	<script type='text/javascript'>
		$(document).ready(function() {
			$('td.lineItemAmount input').change(function(EventObject){
				$(this).parent().next().children('input').val((Number($(this).val())*0.14).toFixed(2));
			});
		});
	</script>
{% endblock %}

{% block sbContent %}
    <h1>Sending new invoice</h2>
    <form action="" method="POST">
        {% csrf_token %}
        <h2>General</h2>
        <table class='form-table'>
            {{form}}
        </table>
        <h2>Line items</h2>
        <p class="help-text">
            Please try to keep invoices to a reasonable amount of line items as it may not fit on one page if there are too many.
        </p>

        {{lineforms.management_form}}
        <table>
            <tr><th>Description</th><th>Amount</th><th>Vat</th></tr>
            {% for f in lineforms %}
                <tr>
                    <td>{{f.id}}{{f.description}}</td><td class='lineItemAmount'>{{f.amount}}</td><td>{{f.vat}}</td>
                </tr>
            {% endfor %}
        </table>

        <input type=submit value="submit"/>
    </form>

{% endblock %}
